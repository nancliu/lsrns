### 精度分析 TODO 清单（v1.0）

#### P0 必做
- 指标与容错
  - [ ] MAPE 分母为 0 的处理策略可配置（过滤/容忍/极小值），在结果 JSON 写明。
  - [ ] 公共列与长度对齐策略入参/出参记录（结果 JSON）。
  - [ ] E1 递归解析错误跳过并计数，损坏/不完整 XML 不中断。
- 图表与字体
  - [ ] 统一中文字体（Microsoft YaHei/SimHei/Noto Sans CJK），无缺字告警。
  - [ ] 确认报告内图表相对路径 `../charts/*.png` 与 `/cases` 静态访问一致。
  - [ ] 完成直方图（观测vs仿真）、残差直方图(flow) 的导出与报告集成。
- 报告与结构化结果
  - [ ] analysis_results.json：补全 overall/gantry/time 层级统计、图表清单、数据源说明。
  - [ ] CSV 导出：总体、门架、时间、异常明细（若有）。
  - [ ] 报告概览卡片美化与阈值提示（MAPE≤15%、GEH≤5等）。

#### P1 可选增强
- 图表
  - [ ] 残差–观测散点（密度着色）。
  - [ ] 门架/时段箱线图；门架×时间热力图。
- 指标
  - [ ] 加权指标（按流量权重）。
  - [ ] 峰值小时流量对比与时移检测。
- 前端
  - [ ] 报告页“返回/下载CSV/查看原图”按钮。
  - [ ] 结果卡片展示概览（去掉长指标）。

#### P2 研发支持
- [ ] 单元测试：E1解析、指标函数、路径生成、空/异常数据。
- [ ] 集成测试：端到端案例（小/大样本），出图/出报校验。
- [ ] 性能压测：E1大量文件解析耗时与内存开销评估。
- [ ] 文档：开发指南（数据格式、扩展点、指标定义）。

#### 验收标准
- [ ] 任意案例生成报告成功，无未捕获异常。
- [ ] 报告页面全部图片正常显示，无中文缺字。
- [ ] API 返回 `report_url`/`chart_urls`，前端“查看报告”可打开。
- [ ] 指标抽样与手工校核一致。
- [ ] CSV/JSON 字段稳定、可自描述。


