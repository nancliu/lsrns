# SUMO 参数影响分析

## 1. 参数分类与优先级

### 1.1 高优先级参数（直接影响车辆插入和路网容量）

#### 1.1.1 departSpeed（发车速度）
- **作用机制**: 控制车辆进入路网时的初始速度
- **取值范围**: {"max", "random", 2.0-5.0}
- **默认值**: "max"
- **影响分析**:
  - `"max"`: 车辆以最大允许速度进入，可能导致插入失败率高
  - `"random"`: 随机速度分布，增加插入成功率
  - `2.0-5.0`: 固定较低速度，提高插入成功率但可能影响交通流
- **标定建议**: 高流量场景建议使用2.0-3.0的固定值

#### 1.1.2 departLane（发车车道）
- **作用机制**: 控制车辆进入路网时的车道选择
- **取值范围**: {"free", "random"}
- **默认值**: "free"
- **影响分析**:
  - `"free"`: 选择最空闲的车道，可能导致车道分布不均
  - `"random"`: 随机选择车道，提高路网利用率
- **标定建议**: 拥堵场景建议使用"random"提高分布均匀性

### 1.2 中优先级参数（影响交通流稳定性和真实性）

#### 1.2.1 minGap（最小车头间距）
- **作用机制**: 控制车辆之间的最小安全距离
- **取值范围**: [0.5, 3.0]
- **默认值**: 2.5
- **影响分析**:
  - 小值（0.5-1.5）: 增加路网容量，但可能影响安全性
  - 中值（1.5-2.5）: 平衡容量和安全性
  - 大值（2.5-3.0）: 提高安全性，但降低路网容量
- **标定建议**: 根据路网密度调整，高密度路网使用较小值

#### 1.2.2 sigma（驾驶行为随机性）
- **作用机制**: 控制驾驶行为的随机性和真实性
- **取值范围**: [0.0, 0.5]
- **默认值**: 0.5
- **影响分析**:
  - `0.0`: 完全确定性行为，不真实但稳定
  - `0.1-0.3`: 适度随机性，平衡真实性和稳定性
  - `0.3-0.5`: 高随机性，更真实但可能不稳定
- **标定建议**: 建议使用0.2-0.3，在真实性和稳定性间平衡

#### 1.2.3 impatience（驾驶急躁程度）
- **作用机制**: 影响车辆变道和超车的激进程度
- **取值范围**: [0.5, 1.0]
- **默认值**: 0.5
- **影响分析**:
  - 低值（0.5-0.7）: 保守驾驶，交通流稳定
  - 高值（0.8-1.0）: 激进驾驶，可能增加拥堵
- **标定建议**: 根据路网拥堵程度调整，拥堵路网使用较低值

#### 1.2.4 laneChangeMode（变道模式）
- **作用机制**: 控制车辆变道行为的策略
- **取值范围**: {0, 1621, 512}
- **默认值**: 1621
- **影响分析**:
  - `0`: 完全允许变道，可能导致交通流不稳定
  - `1621`: 默认变道策略，平衡各种变道需求
  - `512`: 限制部分变道，提高交通流稳定性
- **标定建议**: 高流量场景建议使用512，提高稳定性

### 1.3 低优先级参数（辅助性参数）

#### 1.3.1 maxDepartDelay（最大发车延迟）
- **作用机制**: 控制车辆等待插入的最大时间
- **取值范围**: [30, 600]
- **默认值**: 300
- **影响分析**:
  - 小值（30-120）: 快速失败，减少仿真时间
  - 大值（300-600）: 长时间等待，提高插入成功率
- **标定建议**: 根据路网拥堵程度调整，拥堵路网使用较大值

## 2. 参数交互效应分析

### 2.1 正向交互效应

#### 2.1.1 departSpeed + departLane
- **组合效果**: 低速度 + 随机车道选择
- **优势**: 显著提高车辆插入成功率
- **适用场景**: 高流量、拥堵路网

#### 2.1.2 minGap + sigma
- **组合效果**: 小间距 + 适度随机性
- **优势**: 提高路网容量同时保持真实性
- **适用场景**: 高密度路网

### 2.2 负向交互效应

#### 2.2.1 departSpeed + impatience
- **组合效果**: 高速度 + 高急躁程度
- **风险**: 可能导致交通流不稳定，增加事故风险
- **建议**: 避免同时使用高值

#### 2.2.2 minGap + laneChangeMode
- **组合效果**: 极小间距 + 完全允许变道
- **风险**: 可能导致交通流混乱
- **建议**: 小间距时使用限制性变道策略

## 3. 参数敏感性分析

### 3.1 敏感性排序（从高到低）

1. **departSpeed** - 敏感性系数: 0.85
   - 直接影响车辆插入成功率
   - 对路网容量影响最大

2. **departLane** - 敏感性系数: 0.78
   - 影响路网利用率
   - 对交通流分布影响显著

3. **minGap** - 敏感性系数: 0.65
   - 影响路网容量和安全性
   - 与交通密度相关

4. **sigma** - 敏感性系数: 0.52
   - 影响仿真真实性
   - 对交通流稳定性有影响

5. **impatience** - 敏感性系数: 0.48
   - 影响变道行为
   - 对拥堵形成有影响

6. **laneChangeMode** - 敏感性系数: 0.42
   - 影响交通流稳定性
   - 对整体性能影响中等

7. **maxDepartDelay** - 敏感性系数: 0.28
   - 影响仿真时间
   - 对性能影响最小

### 3.2 参数调整建议

#### 3.2.1 高流量场景优化
```python
# 推荐参数组合
departSpeed = 2.5        # 中等速度，平衡插入成功率和交通流
departLane = "random"    # 随机车道，提高分布均匀性
minGap = 1.8            # 较小间距，提高路网容量
sigma = 0.25            # 适度随机性
impatience = 0.6        # 保守驾驶
laneChangeMode = 512    # 限制性变道
maxDepartDelay = 450    # 较长等待时间
```

#### 3.2.2 低流量场景优化
```python
# 推荐参数组合
departSpeed = "max"      # 最大速度，充分利用路网
departLane = "free"      # 自由选择，优化路径
minGap = 2.2            # 标准间距，保证安全性
sigma = 0.3             # 适度随机性
impatience = 0.7        # 适度激进
laneChangeMode = 1621   # 默认变道策略
maxDepartDelay = 300    # 标准等待时间
```

## 4. 参数标定策略

### 4.1 分层标定策略

#### 第一层：核心参数（departSpeed, departLane）
- **目标**: 最大化车辆插入成功率
- **方法**: 网格搜索 + 交叉验证
- **评估指标**: 插入成功率、路网利用率

#### 第二层：稳定性参数（minGap, sigma, laneChangeMode）
- **目标**: 优化交通流稳定性
- **方法**: 基于第一层结果进行局部搜索
- **评估指标**: 交通流稳定性、延误变化

#### 第三层：辅助参数（impatience, maxDepartDelay）
- **目标**: 微调性能表现
- **方法**: 基于前两层结果进行精细调优
- **评估指标**: 综合性能指标

### 4.2 标定顺序建议

1. **初始阶段**: 固定其他参数，优化departSpeed和departLane
2. **稳定阶段**: 基于最优组合，优化minGap和sigma
3. **精细阶段**: 微调laneChangeMode和impatience
4. **最终阶段**: 优化maxDepartDelay，平衡性能和仿真时间

### 4.3 标定终止条件

- **收敛条件**: 连续5代适应度改善 < 1%
- **时间限制**: 总标定时间 < 48小时
- **质量要求**: 插入成功率 > 95%，流量误差 < 15%
- **稳定性要求**: 连续3次验证结果差异 < 5%


