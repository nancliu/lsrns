<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OD数据处理与仿真系统</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>OD数据处理与仿真系统</h1>
            <p>基于案例管理的交通仿真分析平台</p>
        </header>

        <nav class="navigation">
            <ul>
                <li><a href="#od-processing" class="nav-link active">OD数据处理</a></li>
                <li><a href="#simulation" class="nav-link">仿真运行</a></li>
                <li><a href="#accuracy-analysis" class="nav-link">精度分析</a></li>
                <li><a href="#case-management" class="nav-link">案例管理</a></li>
                <li><a href="#templates" class="nav-link">模板管理</a></li>
                <li><a href="#tools" class="nav-link">工具</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <!-- 1. OD数据处理 -->
            <section id="od-processing" class="section active">
                <h2>OD数据处理</h2>
                <div class="processing-form">
                    <form id="od-processing-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="start-time">开始时间:</label>
                                <input type="datetime-local" id="start-time" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="end-time">结束时间:</label>
                                <input type="datetime-local" id="end-time" class="form-control" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="taz-file">TAZ文件:</label>
                                <select id="taz-file" class="form-control" required>
                                    <option value="">请选择TAZ文件</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="network-file">网络文件:</label>
                                <select id="network-file" class="form-control" required>
                                    <option value="">请选择网络文件</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="interval-minutes">时间间隔(分钟):</label>
                                <input type="number" id="interval-minutes" class="form-control" value="5" min="1" max="60">
                            </div>
                            <div class="form-group">
                                <label for="case-name">案例名称:</label>
                                <input type="text" id="case-name" class="form-control" placeholder="自动生成，可自定义">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="case-description">案例描述:</label>
                            <textarea id="case-description" class="form-control" rows="3" placeholder="可选描述信息"></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" id="process-od-btn" class="btn btn-primary">处理OD数据</button>
                            <button type="button" id="refresh-templates-btn" class="btn btn-secondary">刷新模板</button>
                        </div>
                    </form>
                </div>
                
                <div id="od-processing-result" class="result-area">
                    <div class="loading">等待处理...</div>
                </div>
            </section>

            <!-- 2. 仿真运行 -->
            <section id="simulation" class="section">
                <h2>仿真运行</h2>
                <div class="simulation-controls">
                    <div class="form-group">
                        <label for="simulation-case">选择案例:</label>
                        <select id="simulation-case" class="form-control">
                            <option value="">请选择已处理的案例</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="simulation-type">仿真类型:</label>
                            <select id="simulation-type" class="form-control">
                                <option value="microscopic">微观仿真</option>
                                <option value="mesoscopic">中观仿真</option>
                                <option value="macroscopic">宏观仿真</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="gui-mode">运行模式:</label>
                            <select id="gui-mode" class="form-control">
                                <option value="false">后台运行</option>
                                <option value="true">GUI模式</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button id="run-simulation-btn" class="btn btn-primary">启动仿真</button>
                        <button id="refresh-simulation-cases-btn" class="btn btn-secondary">刷新案例列表</button>
                    </div>
                </div>
                
                <div class="simulation-status">
                    <div class="status-indicator">
                        <span class="status-dot"></span>
                        <span class="status-text">未开始</span>
                    </div>
                    <div id="simulation-progress" class="progress-bar" style="display: none;">
                        <div class="progress-fill"></div>
                    </div>
                </div>
                
                <div id="simulation-result" class="result-area">
                    <div class="loading">等待仿真结果...</div>
                </div>
            </section>

            <!-- 3. 精度分析 -->
            <section id="accuracy-analysis" class="section">
                <h2>精度分析</h2>
                <div class="analysis-controls">
                    <div class="form-group">
                        <label for="analysis-case">选择案例:</label>
                        <select id="analysis-case" class="form-control">
                            <option value="">请选择已完成仿真的案例</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="analysis-type">分析类型:</label>
                        <select id="analysis-type" class="form-control">
                            <option value="accuracy">精度分析</option>
                            <option value="traffic_flow">交通流分析</option>
                            <option value="performance">性能分析</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button id="run-analysis-btn" class="btn btn-primary">开始精度分析</button>
                        <button id="refresh-analysis-cases-btn" class="btn btn-secondary">刷新案例列表</button>
                    </div>
                </div>
                
                <div id="analysis-result" class="result-area">
                    <div class="loading">等待分析结果...</div>
                </div>
            </section>

            <!-- 4. 案例管理 -->
            <section id="case-management" class="section">
                <h2>案例管理</h2>
                <div class="case-controls">
                    <div class="search-controls">
                        <input type="text" id="case-search" class="form-control" placeholder="搜索案例...">
                        <select id="case-status-filter" class="form-control">
                            <option value="">全部状态</option>
                            <option value="created">已创建</option>
                            <option value="processing">处理中</option>
                            <option value="simulating">仿真中</option>
                            <option value="analyzing">分析中</option>
                            <option value="completed">已完成</option>
                            <option value="failed">失败</option>
                        </select>
                        <button id="refresh-cases-btn" class="btn btn-secondary">刷新</button>
                    </div>
                </div>
                
                <div class="case-list">
                    <div class="loading">加载案例列表...</div>
                </div>
            </section>

            <!-- 5. 模板管理 -->
            <section id="templates" class="section">
                <h2>模板管理</h2>
                <div class="template-tabs">
                    <button class="tab-btn active" data-tab="taz">TAZ模板</button>
                    <button class="tab-btn" data-tab="network">网络模板</button>
                    <button class="tab-btn" data-tab="simulation">仿真模板</button>
                </div>
                <div class="template-content">
                    <div id="taz-templates" class="template-section active">
                        <div class="loading">加载TAZ模板...</div>
                    </div>
                    <div id="network-templates" class="template-section">
                        <div class="loading">加载网络模板...</div>
                    </div>
                    <div id="simulation-templates" class="template-section">
                        <div class="loading">加载仿真模板...</div>
                    </div>
                </div>
            </section>

            <!-- 6. 工具 -->
            <section id="tools" class="section">
                <h2>工具</h2>
                <div class="tools-grid">
                    <div class="tool-card">
                        <h3>TAZ文件验证</h3>
                        <p>验证TAZ文件的格式和内容</p>
                        <input type="file" id="taz-file-input" accept=".xml" style="display: none;">
                        <button class="btn btn-secondary" onclick="document.getElementById('taz-file-input').click()">选择文件</button>
                    </div>
                    <div class="tool-card">
                        <h3>TAZ文件修复</h3>
                        <p>自动修复TAZ文件中的常见问题</p>
                        <button class="btn btn-secondary" id="fix-taz-btn">修复文件</button>
                    </div>
                    <div class="tool-card">
                        <h3>TAZ文件比较</h3>
                        <p>比较两个TAZ文件的差异</p>
                        <button class="btn btn-secondary" id="compare-taz-btn">比较文件</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- 模态框 -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="modal-body"></div>
            </div>
        </div>
    </div>

    <script src="script.js?v=20250811_1745"></script>
</body>
</html> 